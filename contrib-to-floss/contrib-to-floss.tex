%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% documentclass and packages
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage{atbegshi}           % workaround for newer PGF versions
%\documentclass[hyperref={pdfpagelabels=false}]{beamer}
\documentclass{beamer}
% https://sourceforge.net/tracker/index.php?func=detail&aid=1848912&group_id=92412&atid=600660
\usepackage{lmodern}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{textcomp}

\usepackage[ngerman]{babel}
\usepackage[babel,english=american,german=guillemets]{csquotes}	% french
\usepackage{microtype}
\usepackage{tikz}
\usetikzlibrary{arrows,positioning}
\usepackage{todonotes}
\presetkeys{todonotes}{inline}{}
\usepackage{ulem}

% colors for listings
\definecolor{lightergray}{gray}{.95}
\definecolor{darkblue}{rgb}{0,0,0.5}
\definecolor{darkgreen}{rgb}{0,0.5,0}
\definecolor{darkred}{rgb}{0.5,0,0}
\definecolor{darkerblue}{rgb}{0,0,0.4}
\definecolor{darkergreen}{rgb}{0,0.4,0}
\definecolor{darkerred}{rgb}{0.4,0,0}

\usepackage{listings}
% \lstloadlanguages{HTML,XML}
\lstset{
    basicstyle=\ttfamily\small\mdseries,
    keywordstyle=\bfseries\color{darkblue},
    identifierstyle=,
    commentstyle=\color{darkgray},
    stringstyle=\itshape\color{darkred},
    frame=none,
    showstringspaces=false,
    tabsize=4,
    backgroundcolor=\color{lightergray},
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% macros
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\makeatletter
\newcommand{\strong}[1]{\@strong{#1}}
\newcommand{\@@strong}[1]{\textbf{\let\@strong\@@@strong#1}}
\newcommand{\@@@strong}[1]{\textnormal{\let\@strong\@@strong#1}}
\let\@strong\@@strong
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% preparations for beamer
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\useinnertheme{default}
\useoutertheme{infolines}
%\usecolortheme[rgb={0.28,0.37,0.52}]{structure}
\usecolortheme[rgb={0.18,0.23,0.33}]{structure}
%\usecolortheme{beaver}
\usefonttheme{structurebold}

%%% Ränder vergrößern für's Café Central
\setbeamersize{text margin left=1.2cm}
\setbeamersize{text margin right=1.2cm}

%%% let hyperlinks look like hyperlinks
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    urlcolor=darkblue
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% images
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pgfdeclareimage[width=\textwidth]{jsonc1}{json-c_volunteer_1.png}
\pgfdeclareimage[width=\textwidth]{jsonc2}{json-c_volunteer_2.png}
\pgfdeclareimage[width=\textwidth]{jsonc3}{json-c_volunteer_3.png}
%\pgfdeclareimage[width=0.6\textwidth]{psituxsmileybeispiel}{psi_tux_smiley_beispiel}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% title, author, date
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\title[Contrib To FLOSS]{Contribute to Free/Libre and OpenSource Software}
\subtitle{HowTo Get Your Things Upstream}
\author{Alexander Dahl}
\institute[lespocky.de]{\url{http://www.lespocky.de/}}
\date{2017-03-11}
\subject{subj}
\keywords{FLOSS, HowTo}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% document
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

\begin{frame}
    \titlepage
\end{frame}

\begin{frame}
    \tableofcontents
\end{frame}


\section*{Who?}

\begin{frame}
    \frametitle{Me}
    \framesubtitle{Yet another free software developer \dots}

    \begin{block}{Background}
        \begin{itemize}
            \item using Free Software since $\approx 2001$
            \item contributing to Free Software since $\approx 2003$
            \item diploma in engineering (mechatronics)
            \item working as Embedded Linux developer
        \end{itemize}
    \end{block}

    \pause

    \begin{block}{Projects}
        \begin{itemize}
            \item fli4l
            \item buildroot
            \item ptxdist
            \item libcgi
            \item Freifunk
        \end{itemize}
    \end{block}
\end{frame}


\section{What?}

\frame{\tableofcontents[currentsection]}

\begin{frame}{Free/Libre and OpenSource Software}
    \begin{block}{What Do We Want?}
        \only<1>
        {
            \begin{itemize}
                \item Free beer!!1!
                \item<2-> Free speech!
            \end{itemize}
        }

        \only<2->
        {
            \begin{itemize}
                \item \sout{Free beer!!1!}
                \item Free speech!
            \end{itemize}
        }
    \end{block}

    \uncover<3->
    {
        \begin{block}{Freedoms as Defined by Free Software Foundation (FSF)}
            \begin{description}
                \item[Freedom 0] The freedom to run the program for any
                    purpose.
                \item[Freedom 1] The freedom to study how the program
                    works, and change it to make it do what you wish.
                \item[Freedom 2] The freedom to redistribute and make
                    copies so you can help your neighbor.
                \item[Freedom 3] The freedom to improve the program, and
                    release your improvements (and modified versions in
                    general) to the public, so that the whole community
                    benefits.
            \end{description}
        \end{block}
    }
\end{frame}

\begin{frame}{Components of FLOSS}
    \begin{itemize}
        \item Sourcecode
        \item Documentation
        \item Artwork
        \item Community
        \item Tests
        \item Infrastructure
    \end{itemize}
\end{frame}


\section{Why?}

\frame{\tableofcontents[currentsection]}

\begin{frame}{Why Contribute?}
    \begin{itemize}
        \item add features
        \item fix bugs
        \item improve software
        \item for fun
        \item social responsibility
        \item sustainability (use old devices)
        \item learning
        \item business
        \item \dots
    \end{itemize}
\end{frame}

\begin{frame}{Why Upstreaming?}
    \begin{itemize}
        \item more people can use it
        \item review and improvement of your stuff
        \item less future work
        \item avoid fragmentation
        \item give back to community
        \item \dots
    \end{itemize}
\end{frame}


\section{How?}

\frame{\tableofcontents[currentsection]}

\begin{frame}[fragile]{I Want to Help!}
    \pgfuseimage{jsonc1}
\end{frame}

\begin{frame}[fragile]{I Want to Help!}
    \begin{verbatim}
> Note that at some point in the (hopefully) near
> future, I expect to create an arguably more
> useful 0.13 release off of the master branch.
> Volunteers are always welcome to help.

I'm volunteer for improving a lot json-c. I have
full ideas and good knowledge.
    \end{verbatim}
\end{frame}

\begin{frame}{It Depends \dots}
    \begin{itemize}
        \item what type of contribution
            \begin{itemize}
                \item Sourcecode
                \item Documentation
                \item Artwork
                \item Community
                \item Tests
                \item (Infrastructure)
            \end{itemize}
        \item which project/community
        \item your preference
    \end{itemize}
\end{frame}

\subsection{Communicate}

\begin{frame}{Ask and Answer Questions}
    \framesubtitle{The community part}
    \begin{itemize}
        \item mailing list
        \item forum
        \item chat
        \item stackoverflow
        \item social media
        \item usenet
        \item \dots
    \end{itemize}
\end{frame}

\begin{frame}{Talk, Talk, Talk}
    \framesubtitle{It's a trap \dots}
    \begin{itemize}
        \item make yourself familiar with community rules
            \begin{itemize}
                \item Code of Conduct
                \item non written rules
            \end{itemize}
        \item choose the right channel
        \item be polite
        \item be patient
        \item learn.to/quote
    \end{itemize}
\end{frame}

\begin{frame}{Use the Bugtracker}
%     \framesubtitle{Or maybe not for different reasons \dots}
    \begin{block}{Which}
        \begin{itemize}
            \item Bugzilla
            \item Trac
            \item Mantis
            \item Redmine
            \item GitHub
            \item Atlassian Jira
        \end{itemize}
    \end{block}
    \pause
    \begin{block}{How}
        \begin{itemize}
            \item make sure it's a bug (not a \enquote{layer 8 problem})
            \item detailed description
            \item reproducible (minimal example)
            \item (add a patch)
        \end{itemize}
    \end{block}
\end{frame}

\subsection{Git}

\begin{frame}[fragile]{What's a Patch?}
    \begin{lstlisting}[%
        basicstyle=\ttfamily\tiny\mdseries
    ]
From: Alexander Dahl <alex@netz39.de>
Date: Thu, 17 Mar 2016 15:04:09 +0100
Subject: x86: fix platform_export_bootpart() for Xen virtual disks

Virtual disk devices in a Xen virtual machine (DomU) can be /dev/xvda,
/dev/xvdb and so on with partitions like /dev/xdva1. Devices named like
this where not considered before. This resulted in a non working
sysupgrade, because the boot partition could not be found.

Signed-off-by: Alexander Dahl <alex@netz39.de>
Suggested-by: Matthias Schiffer <mschiffer@universe-factory.net>

diff --git a/target/linux/x86/base-files/lib/upgrade/platform.sh b/target/linux/x86/base-files/lib/upgrade/platform.sh
index 73ab5ef..adc119c 100644
--- a/target/linux/x86/base-files/lib/upgrade/platform.sh
+++ b/target/linux/x86/base-files/lib/upgrade/platform.sh
@@ -17,7 +17,7 @@ platform_export_bootpart() {
            PARTUUID=[a-f0-9][a-f0-9][a-f0-9][a-f0-9][a-f0-9][a-f0-9][a-f0-9][a-f0-9]-02)
                uuid="${disk#PARTUUID=}"
                uuid="${uuid%-02}"
-               for disk in /dev/[hsv]d[a-z]; do
+               for disk in /dev/[hsv]d[a-z] /dev/xvd[a-z]; do
                    set -- $(dd if=$disk bs=1 skip=440 count=4 2>/dev/null | hexdump -v -e '4/1 "%02x "')
                    if [ "$4$3$2$1" = "$uuid" ]; then
                        export BOOTPART="${disk}1"
    \end{lstlisting}
    \pause
    This fixed sysupgrade for OpenWRT Xen VM. Merged both in gluon
    (Freifunk) and upstream.
    See \href{https://github.com/freifunk-gluon/gluon/pull/692}{PR-692}
    on GitHub.
\end{frame}

\begin{frame}{Why Git?}
    \begin{exampleblock}{Why?}
        \begin{itemize}
            \item in 2016 most projects start with Git
            \item GitHub
            \item lots of projects converted their old VCS to Git
            \item distributed (offline) work possible
        \end{itemize}
    \end{exampleblock}
    \pause
    \begin{alertblock}{Why not?}
        \begin{itemize}
            \item the bad things: \url{https://stevebennett.me/2012/02/24/10-things-i-hate-about-git/}
        \end{itemize}
    \end{alertblock}
\end{frame}

\begin{frame}{Learn Git}
    \begin{columns}[T]
        \begin{column}{0.4\textwidth}
            \input{git-icon.tikz}
        \end{column}
        \begin{column}{0.6\textwidth}
            \begin{itemize}
                \item Books
                    \begin{itemize}
                        \item e.\,g. \href{https://git-scm.com/book}{Pro Git}
                    \end{itemize}
                \item Tutorials
                \item Workshops
                \item see \url{https://git-scm.com/doc}
            \end{itemize}
            \pause
            \begin{itemize}
                \item \large\strong{Use it!}\normalsize
            \end{itemize}
        \end{column}
    \end{columns}
\end{frame}

\begin{frame}{It's Distributed!}
    \begin{columns}[T]
        \begin{column}{0.4\textwidth}
            \input{git_simple.tikz}
        \end{column}
        \begin{column}{0.6\textwidth}
            \begin{itemize}
                \item add
                \item branch
                \item checkout
                \item commit
                \item diff
                \item log
                \item status
            \end{itemize}
        \end{column}
    \end{columns}
\end{frame}

\begin{frame}{Send Patches}
    \framesubtitle{Yes, to mailing lists \dots}
    \begin{block}{Do Send}
        \begin{itemize}
            \item clone upstream repository
            \item create a local branch
            \item work, work \dots
            \item \texttt{git format-patch}
            \item \texttt{git send-email}
        \end{itemize}
    \end{block}
    \pause
    \begin{block}{Let Pull}
        \begin{itemize}
            \item host your own git server
            \item synchronize with upstream \strong{and} your git server \\
                    (\texttt{git help remote})
            \item write a mail saying someone should pull from your server
        \end{itemize}
    \end{block}
\end{frame}

\begin{frame}{Pull Requests}
    \framesubtitle{Get some changes from my tree!}
    \begin{itemize}
        \item \texttt{git request-pull}
        \item click this GitHub button
    \end{itemize}
    \pause
    \begin{block}{What does it mean?}
        I made some changes and pushed it to my public repository.
        Would you mind pulling from there to review what I did and
        maybe integrate it upstream?
    \end{block}
    \pause
    \begin{itemize}
        \item upstream maintainer should review patch (series)
        \item tools like \href{https://patchwork.ozlabs.org/}{patchworks}
                help maintainer
        \item \url{http://www.marmalade.de/magazin/2014/12/pullrequests-fluch-und-segen/}
    \end{itemize}
\end{frame}

\begin{frame}{GitHub\textregistered}
    \begin{columns}[T]
        \begin{column}{0.4\textwidth}
            \input{github-mark.tikz}
        \end{column}
        \begin{column}{0.6\textwidth}
            \begin{itemize}
                \item Git repository hosting
                \item issue tracker
                \item wiki
                \item easy fork, branch, pull request, merge \dots
                \item social net (follower)
                \item statistics
                \item service integration
                \item website hosting
                \item (enterprise services)
            \end{itemize}
        \end{column}
    \end{columns}
\end{frame}

\begin{frame}{GitHub Workflow}
    \framesubtitle{Looks easier at first sight \dots}
    \input{git_distributed.tikz}
\end{frame}

\begin{frame}{Patch Improvement}
    \begin{block}{Better Patches}
        \begin{itemize}
            \item change one thing at a time
            \item write a good commit message
            \begin{itemize}
                \item short first line
                \item one empty line
                \item describe the reason for the change
                \item reference ticket numbers
            \end{itemize}
        \end{itemize}
    \end{block}
    \pause
    \begin{block}{Patch v2}
        \begin{itemize}
            \item \small\texttt{git format-patch -v4 -M -s -o outgoing origin/master}\normalsize
            \item what can \texttt{git rebase} do for you?
            \item see \href{https://buildroot.uclibc.org/downloads/manual/manual.html\#submitting-patches}{buildroot manual}
                    on submitting patches
        \end{itemize}
    \end{block}
\end{frame}

\begin{frame}{Contribute Without Git}
    \begin{itemize}
        \item sourcecode and documentation
        \begin{itemize}
            \item patch and quilt
            \item other VCS
            \item things not in VCS
            \item \dots
        \end{itemize}
        \item other categories
        \begin{itemize}
            \item you probably won't need a VCS
        \end{itemize}
    \end{itemize}
\end{frame}

\section*{What else?}

\begin{frame}{What Happened Next on the JSON-C Mailing List?}
    \pgfuseimage{jsonc2}
\end{frame}

\begin{frame}[fragile]{What Happened Next on the JSON-C Mailing List?}
    \begin{verbatim}
> I'm volunteer for improving a lot json-c. I have
> full ideas and good knowledge.

Great! If you have some changes you're thinking of
making to json-c feel free to post a message with
your idea (w/ a separate subject please). If you
have code changes, pull requests are welcome,
especially if they include tests and any necessary
doc changes.
    \end{verbatim}
\end{frame}

\begin{frame}{What Happened Next on the JSON-C Mailing List?}
    \pgfuseimage{jsonc3}
\end{frame}

\begin{frame}{Legal Stuff}
    \begin{block}{The Git Logo}
        Git Logo by \href{http://twitter.com/jasonlong}{Jason Long} is
        licensed under the
        \href{http://creativecommons.org/licenses/by/3.0/}{Creative Commons Attribution 3.0 Unported License}.
    \end{block}
    \begin{block}{The GitHub Logo}
        GITHUB®, the GITHUB® logo design, OCTOCAT® and the OCTOCAT® logo
        design are exclusive trademarks registered in the United States
        by GitHub, Inc.

        The OCTOCAT design is the exclusive property of GitHub, Inc and
        has been federally registered with the United States Copyright
        Office. All rights reserved.
    \end{block}
\end{frame}

\begin{frame}{The Last Slide}
    \begin{block}{Contact Me}
        \begin{description}
            \item [E-Mail] \href{mailto:post@lespocky.de}{post@lespocky.de}
            \item [WWW] \href{http://www.lespocky.de/}{lespocky.de} or
                    \href{http://blog.antiblau.de/}{blog.antiblau.de}
            \item [Twitter] \href{https://twitter.com/LeSpocky}{@LeSpocky}
        \end{description}
    \end{block}
    \begin{block}{Slides}
        \begin{itemize}
            \item \texttt{hg clone https://bitbucket.org/lespocky/talks}
        \end{itemize}
    \end{block}
    \begin{block}{License}
        These slides are licensed under the Creative Commons
        Attribution-ShareAlike 4.0 International License. (CC BY-SA 4.0) \\
        To view a copy of this license, visit
        \url{http://creativecommons.org/licenses/by-sa/4.0/}.
    \end{block}
\end{frame}

\end{document}
