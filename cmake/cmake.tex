%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% documentclass and packages
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage{atbegshi}           % workaround for newer PGF versions
%\documentclass[hyperref={pdfpagelabels=false}]{beamer}
%\documentclass[aspectratio=1610,t]{beamer}
\documentclass[t]{beamer}
% https://sourceforge.net/tracker/index.php?func=detail&aid=1848912&group_id=92412&atid=600660
\usepackage{lmodern}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{textcomp}

\usepackage[english]{babel}
\usepackage[babel,english=american,german=guillemets]{csquotes}	% french
\usepackage{microtype}
\usepackage{tikz}
\usetikzlibrary{arrows,positioning}
\usepackage{todonotes}
\presetkeys{todonotes}{inline}{}
\usepackage{ulem}

% colors for listings
\definecolor{lightergray}{gray}{.95}
\definecolor{darkblue}{rgb}{0,0,0.5}
\definecolor{darkgreen}{rgb}{0,0.5,0}
\definecolor{darkred}{rgb}{0.5,0,0}
\definecolor{darkerblue}{rgb}{0,0,0.4}
\definecolor{darkergreen}{rgb}{0,0.4,0}
\definecolor{darkerred}{rgb}{0.4,0,0}

\usepackage{listings}
% \lstloadlanguages{HTML,XML}
\lstset{%
    basicstyle=\ttfamily\small\mdseries,
    keywordstyle=\bfseries\color{darkblue},
    identifierstyle=,
    commentstyle=\color{darkgray},
    stringstyle=\itshape\color{darkred},
    frame=none,
    showstringspaces=false,
    tabsize=4,
    backgroundcolor=\color{lightergray},
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% macros
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\makeatletter
\newcommand{\strong}[1]{\@strong{#1}}
\newcommand{\@@strong}[1]{\textbf{\let\@strong\@@@strong#1}}
\newcommand{\@@@strong}[1]{\textnormal{\let\@strong\@@strong#1}}
\let\@strong\@@strong
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% preparations for beamer
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\useinnertheme{default}
\useoutertheme{infolines}
%\usecolortheme[rgb={0.28,0.37,0.52}]{structure}
\usecolortheme[rgb={0.18,0.23,0.33}]{structure}
%\usecolortheme{beaver}
\usefonttheme{structurebold}

%%% Ränder vergrößern für's Café Central
%\setbeamersize{text margin left=1.2cm}
%\setbeamersize{text margin right=1.2cm}

%%% let hyperlinks look like hyperlinks
\hypersetup{%
    colorlinks=true,
    linkcolor=black,
    urlcolor=darkblue
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% images
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pgfdeclareimage[width=0.3\textwidth]{cmakelogo}{resources/Cmake.svg.png}
\pgfdeclareimage[height=0.8\textheight]{screenshot-gui}{resources/Screenshot_20181021_141444.png}
\pgfdeclareimage[width=0.6\textwidth]{screenshot-generators}{resources/Screenshot_GUI_Generators.png}
\pgfdeclareimage[width=0.5\textwidth]{screenshot-compiler}{resources/Screenshot_20181021_144601.png}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% title, author, date
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\title[CMake]{Building C/C++ Projects with (Modern) CMake}
\subtitle{Powerful Cross Platform Build Process Management}
\author{Alexander Dahl}
\institute[lespocky.de]{\url{http://www.lespocky.de/}}
\date{2018-10-22}
\subject{subj}
\keywords{CMake, Compiler, C, C++, Software, Build}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% document
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

\begin{frame}
    \titlepage
\end{frame}

%\begin{frame}
%    \tableofcontents
%\end{frame}


\section*{Who?}

\begin{frame}
    \frametitle{Me}
    \framesubtitle{Yet another free software developer \dots}

    \begin{columns}[T]
        \begin{column}{0.7\textwidth}
            \begin{block}{Background}
                \begin{itemize}
                    \item using Free Software since $\approx 2001$
                    \item contributing to Free Software since $\approx 2003$
                    \item diploma in engineering (mechatronics)
                    \item working as Embedded Linux developer
                    \item member of \href{http://www.netz39.de/}{Netz39} Hackerspace
                \end{itemize}
            \end{block}
        \end{column}
        \pause
        \begin{column}{0.3\textwidth}
            \begin{block}{Projects}
                \begin{itemize}
                    \item \href{https://www.fli4l.de/}{fli4l}
                    \item \href{https://buildroot.org/}{buildroot}
                    \item \href{https://ptxdist.org/}{ptxdist}
                    \item \href{https://github.com/rafaelsteil/libcgi}{libcgi}
                    \item \href{https://freifunk.net/}{Freifunk}
                \end{itemize}
            \end{block}
        \end{column}
    \end{columns}
\end{frame}


\section{Usage}

%\frame{\tableofcontents[currentsection]}

\begin{frame}[fragile]{CMake}
    \begin{columns}[T]
        \begin{column}{0.4\textwidth}
            \begin{itemize}
                \item Build C/C++ projects
                \item Compiler independent
                \item Cross platform
                \item Together with native build environment
                \item Simple configuration with \texttt{CMakeLists.txt} files
                \item Out-of-source builds
                \item Free Software
                \item And more …
            \end{itemize}
        \end{column}
        \begin{column}{0.6\textwidth}
            \pgfuseimage{cmakelogo}
            \begin{lstlisting}[%
                %basicstyle=\ttfamily\small\mdseries
                basicstyle=\ttfamily\footnotesize\mdseries
                %basicstyle=\ttfamily\tiny\mdseries
            ]
cmake_minimum_required(VERSION 3.1)
project(MyProject
    VERSION 1.0
    DESCRIPTION "Very nice project"
    LANGUAGES CXX
)
            \end{lstlisting}
        \end{column}
    \end{columns}
\end{frame}

\begin{frame}{Getting Started}
    \begin{block}{Installation}
        \begin{itemize}
            \item Linux: Use your package manager
            \item Windows, MacOS: Download from \url{https://cmake.org/}
            \item From Source with your favorite C++ Compiler
        \end{itemize}
    \end{block}
    \pause
    \begin{block}{Documentation}
        \begin{itemize}
            \item CMake comes well documented
                \begin{itemize}
                    \item \url{https://cmake.org/documentation}
                    \item \texttt{man 7 cmake-*}
                \end{itemize}
            \item on the world wide web
                \begin{itemize}
                    \item look out for \enquote{Modern CMake}
                    \item beware of examples showing old way to do things
                \end{itemize}
        \end{itemize}
    \end{block}
\end{frame}

\begin{frame}[fragile]{Usage}
    \begin{itemize}
        \item Use out of tree builds
    \end{itemize}
    \begin{block}{Command Line}
        \begin{lstlisting}[%
            basicstyle=\ttfamily\small\mdseries
            %basicstyle=\ttfamily\footnotesize\mdseries
            %basicstyle=\ttfamily\scriptsize\mdseries
            %basicstyle=\ttfamily\tiny\mdseries
        ]
~/path/to/your/src $ mkdir build
~/path/to/your/src $ cd build
~/path/to/your/src/build $ cmake ..
~/path/to/your/src/build $ make
        \end{lstlisting}
    \end{block}
    \begin{itemize}
        \item first call to \texttt{cmake} is special, sets generator and compiler
        \item pre-set options with \texttt{-D}
            \begin{itemize}
                \item you can overwrite options again later
                \item useful when building from some external build system (like buildroot, ptxdist, …)
            \end{itemize}
    \end{itemize}
\end{frame}

\begin{frame}{GUI}
    \pgfuseimage{screenshot-gui}
\end{frame}

\begin{frame}{Generators}
    \begin{columns}[T]
        \begin{column}{0.4\textwidth}
            \begin{itemize}
                \item Makefiles
                    \begin{itemize}
                        \item Borland
                        \item MSYS
                        \item MinGW
                        \item NMake
                        \item Unix
                        \item …
                    \end{itemize}
                \item Ninja
                \item Visual Studio
                \item Xcode
                \item …
            \end{itemize}
        \end{column}
        \begin{column}{0.6\textwidth}
            \pgfuseimage{screenshot-generators}
        \end{column}
    \end{columns}

    \begin{block}{Help}
        \texttt{cmake-generators(7)}
    \end{block}
\end{frame}

\begin{frame}{Compilers}
    \begin{columns}[T]
        \begin{column}{0.5\textwidth}
            \begin{itemize}
                \item AppleClang
                \item Clang
                \item GNU (GCC)
                \item MSVC (Visual Studio)
                \item SunPro
                \item Intel
                \item XL (IBM)
                \item …
            \end{itemize}
        \end{column}
        \begin{column}{0.5\textwidth}
            \pgfuseimage{screenshot-compiler}
        \end{column}
    \end{columns}

    \begin{block}{Help}
        \texttt{cmake-compile-features(7)}
    \end{block}
\end{frame}

%\section{How?}
%
%\frame{\tableofcontents[currentsection]}

\section*{What else?}

\begin{frame}{Legal Stuff}
\end{frame}

\begin{frame}{The Last Slide}
    \begin{block}{Contact Me}
        \begin{description}
            \item [E-Mail] \href{mailto:post@lespocky.de}{post@lespocky.de}
            \item [WWW] \href{http://www.lespocky.de/}{lespocky.de} or
                    \href{http://blog.antiblau.de/}{blog.antiblau.de}
            \item [Twitter] \href{https://twitter.com/LeSpocky}{@LeSpocky}
        \end{description}
    \end{block}
    \begin{block}{Slides}
        \begin{itemize}
            \item \texttt{hg clone https://bitbucket.org/lespocky/talks}
        \end{itemize}
    \end{block}
    \begin{block}{License}
        These slides are licensed under the Creative Commons
        Attribution-ShareAlike 4.0 International License. (CC BY-SA 4.0) \\
        To view a copy of this license, visit
        \url{http://creativecommons.org/licenses/by-sa/4.0/}.
    \end{block}
\end{frame}

\end{document}
